<script id="sidecar-replies-template" type="text/x-handlebars-template">
  {{#if this.postId}}
  <div id="sidecar-replies-{{postId}}" class="sidecar-replies">
  {{#if parent}}
  <div class="sidecar-parent">
  <div class="sidecar-parent-indicator">↙️</div>
  {{> postTemplate parent}}
  </div>
  {{/if}}
  {{#each replies}}
  {{> postTemplate this}}
  {{/each}}
  </div>
  {{else}}
  <div class="sidecar-replies-empty sidecar-replies">
  </div>    
  {{/if}}
</script>

<script id="sidecar-post-template" type="text/x-handlebars-template">
  {{#if postId}}
  <div id="sidecar-post-{{postId}}" class="sidecar-post">
  <div class="sidecar-post-user-info">
  <img id="avatar-{{postId}}" class="sidecar-post-avatar" src="{{avatar}}" alt="User Avatar" loading="lazy">
  <div class="sidecar-post-author">
  <a href="https://bsky.app/profile/{{handle}}">
  <div class="sidecar-post-username">{{displayName}}</div>
  </a>
  <a href="https://bsky.app/profile/{{handle}}">
  <div class="sidecar-post-handle">@{{handle}}</div>
  </a>
  </div>
  </div>
  {{> bodyTemplate this}}
  {{> footerTemplate this}}
  </div>
  {{else}}
  <div class="sidecar-post-empty" class="sidecar-post">
  </div>
  {{/if}}
</script>

<script id="sidecar-footer-template" type="text/x-handlebars-template">
  <div class="sidecar-post-footer">
  <div class="sidecar-post-timestamp">
  <a href="{{postUrl}}">
  {{timestamp}}
  </a>
  </div>
  {{> postCountsTemplate this}}
  </div>
</script>

<script id="sidecar-post-counts-template" type="text/x-handlebars-template">

  <div class="sidecar-post-counts">
  <div class="sidecar-count sidecar-count-replies">
  <div class="sidecar-count-icon sidecar-reply-button">{{{replySvg}}}</div>
  <div class="sidecar-count-label sidecar-count-label-replies">{{replyCount}}</div>
  </div>

  <div class="sidecar-count sidecar-count-reposts">
  <div class="sidecar-count-icon sidecar-repost-button">{{{repostSvg}}}</div>
  <div class="sidecar-count-label sidecar-count-label-reposts">{{repostCount}}</div>
  </div>

  <div class="sidecar-count sidecar-count-likes">
  <div class="sidecar-count-icon sidecar-like-button">{{{likeSvg}}}</div>
  <div class="sidecar-count-label sidecar-count-label-likes">{{likeCount}}</div>
  </div>

  </div>
</script>


<script id="sidecar-body-template" type="text/x-handlebars-template">
<div class="sidecar-post-body">
<div class="sidecar-post-content">{{{content}}}</div>
  {{#if embed}}
  {{#each embed.images}}
  {{> imageTemplate this}}
  {{/each}}
  {{#if embed.media.images}}
  {{#each embed.media.images}}
  {{> imageTemplate this}}
  {{/each}}
  {{/if}}
  {{/if}}
  {{#if quotedPost}}
  {{> quoteTemplate quotedPost}}
  {{/if}}
</div>
</script>

<script id="sidecar-embed-image-template" type="text/x-handlebars-template">
        <button aria-label="alt text" role="button" tabindex="0" class="css-175oi2r r-1loqt21 r-1otgn73" style="flex: 1 1 0%; overflow: hidden; background-color: rgb(241, 243, 245);" type="button"><div data-expoimage="true" class="css-175oi2r" style="overflow: hidden; flex: 1 1 0%;"><div><img alt="alt text" src="{{thumb}}" loading="lazy" style="object-position: left 50% top 50%; width: 100%; height: 100%; object-fit: cover; transition-duration: 0ms; transition-timing-function: linear;" fetchpriority="auto" title=""></div></div><div class="css-175oi2r" style="position: absolute; inset: 0px; border-radius: 12px 0px 0px 12px; border-width: 1px; border-color: rgb(212, 219, 226); opacity: 0.6; pointer-events: none;"></div></button>
</script>

<script id="sidecar-embed-quote-template" type="text/x-handlebars-template">
<div class="sidecar-embed-quote" style="border: 1px solid rgb(212, 219, 226); border-radius: 12px; padding: 12px; margin-top: 8px;">
  <div class="sidecar-quote-author" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
    {{#if avatar}}
    <img class="sidecar-quote-avatar" src="{{avatar}}" alt="User Avatar" style="width: 20px; height: 20px; border-radius: 50%;" loading="lazy">
    {{/if}}
    <a href="https://bsky.app/profile/{{handle}}" style="text-decoration: none;">
      <span class="sidecar-quote-displayname" style="font-weight: 600;">{{displayName}}</span>
      <span class="sidecar-quote-handle" style="color: rgb(112, 127, 140);">@{{handle}}</span>
    </a>
  </div>
  <div class="sidecar-quote-content">{{{text}}}</div>
  {{#if images}}
  <div class="sidecar-quote-images" style="margin-top: 8px;">
    {{#each images}}
    <img src="{{this.thumb}}" alt="Embedded image" style="max-width: 100%; border-radius: 8px;" loading="lazy">
    {{/each}}
  </div>
  {{/if}}
</div>
</script>
