<script id="sidecar-replies-template" type="text/x-handlebars-template">
  {{#if this.postId}}
  <div id="sidecar-replies-{{postId}}" class="sidecar-replies">
  {{#if parent}}
  <div class="sidecar-parent">
  <div class="sidecar-parent-indicator">↙️</div>
  {{> postTemplate parent}}
  </div>
  {{/if}}
  {{#each replies}}
  {{> postTemplate this}}
  {{/each}}
  </div>
  {{else}}
  <div class="sidecar-replies-empty sidecar-replies">
  </div>    
  {{/if}}
</script>

<script id="sidecar-post-template" type="text/x-handlebars-template">
  {{#if postId}}
  <div id="sidecar-post-{{postId}}" class="sidecar-post">
  <div class="sidecar-post-user-info">
  <img id="avatar-{{postId}}" class="sidecar-post-avatar" src="{{avatar}}" alt="User Avatar" loading="lazy">
  <div class="sidecar-post-author">
  <a href="https://bsky.app/profile/{{handle}}">
  <div class="sidecar-post-username">{{displayName}}</div>
  </a>
  <a href="https://bsky.app/profile/{{handle}}">
  <div class="sidecar-post-handle">@{{handle}}</div>
  </a>
  </div>
  </div>
  {{#if content.entries}}
  {{#each content}}
  <div class="sidecar-post-content">{{this}}</div>
  {{/each}}
  {{else}}
  <div class="sidecar-post-content">{{content}}</div>
  {{/if}}
  <div class="sidecar-post-footer">
  <div class="sidecar-post-timestamp">
  <a href="{{postUrl}}">
  {{timestamp}}
  </a>
  </div>
  <div class="sidecar-post-counts">
  <div class="sidecar-count">
  <div class="sidecar-count-icon sidecar-reply-button">{{{replySvg}}}</div>
  <div class="sidecar-count-label">{{replyCount}}</div>
  </div>

  <div class="sidecar-count">
  <div class="sidecar-count-icon sidecar-repost-button">{{{repostSvg}}}</div>
  <div class="sidecar-count-label">{{repostCount}}</div>
  </div>

  <div class="sidecar-count">
  <div class="sidecar-count-icon sidecar-like-button">{{{likeSvg}}}</div>
  <div class="sidecar-count-label">{{likeCount}}</div>
  </div>

  </div>
  </div>
  </div>
  {{else}}
  <div class="sidecar-post-empty" class="sidecar-post">
  </div>
  {{/if}}
</script>
